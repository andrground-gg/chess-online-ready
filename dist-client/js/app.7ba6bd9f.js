(function(e){function t(t){for(var n,r,s=t[0],i=t[1],l=t[2],d=0,b=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(c,r)&&c[r]&&b.push(c[r][0]),c[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(b.length)b.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,s=1;s<a.length;s++){var i=a[s];0!==c[i]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},c={app:0},o=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"4b8e":function(e,t,a){e.exports=a.p+"img/bQueen.09cf2af0.png"},"55a1":function(e,t){e.exports="data:image/png;base64,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"},"756d":function(e,t,a){},"98a1":function(e,t,a){e.exports=a.p+"img/wQueen.82c52fb4.png"},ab22:function(e,t,a){e.exports=a.p+"img/bBishop.bc724203.png"},bd71:function(e,t,a){e.exports=a.p+"img/wBishop.13f3d4a9.png"},c8e0:function(e,t,a){e.exports=a.p+"img/bRook.f8e59fb4.png"},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),c={class:"base"},o={class:"base-layout"};function r(e,t,a,r,s,i){var l=Object(n["B"])("Navbar"),u=Object(n["B"])("router-view"),d=Object(n["B"])("ModalAuth");return Object(n["w"])(),Object(n["f"])("div",c,[Object(n["g"])("div",o,[Object(n["j"])(l,{onShowModalLogIn:t[0]||(t[0]=function(e){r.showModal(),r.isModalLogIn=!0}),onShowModalSignUp:t[1]||(t[1]=function(e){r.showModal(),r.isModalLogIn=!1}),onFocusLogIn:t[2]||(t[2]=function(e){r.homeToRegister=!1,r.focusOnInput()}),onFocusSignUp:t[3]||(t[3]=function(e){r.homeToRegister=!0,r.focusOnInput()}),isSearchVisible:r.isSearchVisible,searchMode:r.searchMode,searchTimeMode:r.searchTimeMode,onCancelSearch:r.cancelSearch},null,8,["isSearchVisible","searchMode","searchTimeMode","onCancelSearch"]),Object(n["j"])(u,{onShowSearch:r.showSearch,homeToRegister:r.homeToRegister,onSwitchToRegister:t[4]||(t[4]=function(e){return r.homeToRegister=!r.homeToRegister})},null,8,["onShowSearch","homeToRegister"])]),"/"!==e.$route.path?Object(n["J"])((Object(n["w"])(),Object(n["d"])(d,{key:0,isLogin:r.isModalLogIn,onCloseModal:r.closeModal},null,8,["isLogin","onCloseModal"])),[[n["G"],r.isModalVisible]]):Object(n["e"])("",!0)])}a("ac1f"),a("1276"),a("d3b7");var s=a("d4ec"),i=a("bee2"),l=a("daa8"),u={baseURL:"http://localhost:8000"},d=function(){function e(){Object(s["a"])(this,e)}return Object(i["a"])(e,[{key:"setupSocketConnection",value:function(){this.socket=Object(l["a"])(u.baseURL)}},{key:"getSocket",value:function(){return this.socket}},{key:"startSearch",value:function(e,t,a,n){this.socket.emit("startSearch",{mode:e,timeMode:t,username:a,elo:n})}},{key:"cancelSearch",value:function(e,t,a){this.socket.emit("cancelSearch",{mode:e,timeMode:t,username:a})}},{key:"joinChat",value:function(e){this.socket.emit("joinChat",{id:e})}},{key:"leaveChat",value:function(e){this.socket.emit("leaveChat",{id:e})}},{key:"sendMessage",value:function(e,t,a){this.socket.emit("sendMessage",{id:e,username:t,content:a})}},{key:"madeMove",value:function(e,t,a,n,c,o){this.socket.emit("madeMove",{id:e,board:t,whiteCastling:a,blackCastling:n,enPassant:c,isCheck:o})}},{key:"startTimer",value:function(e,t,a,n,c,o,r,s,i){this.socket.emit("startTimer",{id:e,time:t,increment:a,board:n,mode:c,whiteName:o,blackName:r,whiteElo:s,blackElo:i})}},{key:"getGameData",value:function(e){this.socket.emit("getGameData",{id:e})}},{key:"offerDraw",value:function(e){this.socket.emit("offerDraw",{id:e})}},{key:"endGame",value:function(e,t,a,n,c){this.socket.emit("endGame",{id:e,mode:t,white:a,black:n,moves:c})}},{key:"disconnect",value:function(){this.socket&&this.socket.disconnect()}}]),e}(),b=new d,p=a("5502"),g=a("6c02"),j=(a("fb6a"),a("ce32")),m=a.n(j),O={class:"base-navbar"},f=Object(n["i"])("Home"),v=Object(n["i"])("Profile"),h=Object(n["i"])("Play"),w=Object(n["i"])("Leaderboard"),_={class:"navbar__auth-buttons"},y={key:1,class:"search"},D=Object(n["g"])("p",null,"Searching...",-1),A=Object(n["g"])("img",{class:"search__gif",src:m.a},null,-1),S=Object(n["i"])("Log out");function k(e,t,a,c,o,r){var s=Object(n["B"])("router-link");return Object(n["w"])(),Object(n["f"])("nav",O,[Object(n["j"])(s,{to:"/"},{default:Object(n["I"])((function(){return[f]})),_:1}),c.authenticated?(Object(n["w"])(),Object(n["d"])(s,{key:0,to:"/profile/".concat(e.$store.getters.user.username)},{default:Object(n["I"])((function(){return[v]})),_:1},8,["to"])):Object(n["e"])("",!0),Object(n["j"])(s,{to:c.playLink},{default:Object(n["I"])((function(){return[h]})),_:1},8,["to"]),Object(n["j"])(s,{to:"/leaderboard"},{default:Object(n["I"])((function(){return[w]})),_:1}),Object(n["g"])("div",_,[c.authenticated?Object(n["e"])("",!0):(Object(n["w"])(),Object(n["f"])("button",{key:0,class:"btn",onClick:t[0]||(t[0]=function(t){return"/"!==e.$route.path?e.$emit("showModalSignUp"):e.$emit("focusSignUp")})},"Sign up")),c.authenticated?Object(n["e"])("",!0):(Object(n["w"])(),Object(n["f"])("button",{key:1,class:"btn",onClick:t[1]||(t[1]=function(t){return"/"!==e.$route.path?e.$emit("showModalLogIn"):e.$emit("focusLogIn")})},"Log in"))]),a.isSearchVisible&&c.authenticated?(Object(n["w"])(),Object(n["f"])("div",y,[D,Object(n["g"])("p",null,Object(n["D"])(a.searchMode.charAt(0).toUpperCase()+a.searchMode.slice(1)),1),Object(n["g"])("p",null,Object(n["D"])(a.searchTimeMode),1),A,Object(n["g"])("button",{onClick:t[2]||(t[2]=function(t){return e.$emit("cancelSearch")})},"Cancel")])):Object(n["e"])("",!0),c.authenticated?(Object(n["w"])(),Object(n["d"])(s,{key:2,onClick:c.logOut,to:"/logout",class:"navbar__logout"},{default:Object(n["I"])((function(){return[S]})),_:1},8,["onClick"])):Object(n["e"])("",!0)])}a("caad"),a("99af"),a("4de4");var M={props:{isSearchVisible:{type:Boolean,required:!0,default:!1},searchMode:{type:String,required:!1,validator:function(e){return["","bullet","blitz","rapid"].includes(e)}},searchTimeMode:{type:String,required:!1}},setup:function(){var e=Object(p["b"])(),t=Object(n["b"])((function(){var t;return null!=(null===(t=e.getters.user)||void 0===t?void 0:t._id)}));Object(n["H"])((function(){return t.value}),(function(){t.value&&fetch("".concat(u.baseURL,"/games?username=").concat(e.getters.user.username),{method:"GET",headers:{"Access-Control-Allow-Credentials":!0},credentials:"include"}).then((function(e){return e.json()})).then((function(t){var a=t.filter((function(e){return!1===e.isFinished}))[0];a&&e.dispatch("getActiveGame",a._id)}))}));var a=Object(n["b"])((function(){var t,a="/play";return null!==(t=e.getters.activeGame)&&void 0!==t&&t._id&&(a+="/"+e.getters.activeGame._id),a})),c=function(){fetch("".concat(u.baseURL,"/logout"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){return e.commit("unsetData")}))};return{logOut:c,authenticated:t,playLink:a}}},C=a("d959"),T=a.n(C);const L=T()(M,[["render",k]]);var q=L,G={class:"modal-backdrop"},P={class:"modal"};function B(e,t,a,c,o,r){var s=Object(n["B"])("LogIn"),i=Object(n["B"])("SignUp");return Object(n["w"])(),Object(n["f"])("div",G,[Object(n["g"])("div",P,[Object(n["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.$emit("closeModal")}),class:"modal__close"},"Ã—"),a.isLogin?(Object(n["w"])(),Object(n["d"])(s,{key:0,switchOption:!1,onCloseModal:t[1]||(t[1]=function(t){return e.$emit("closeModal")})})):(Object(n["w"])(),Object(n["d"])(i,{key:1,switchOption:!1,onCloseModal:t[2]||(t[2]=function(t){return e.$emit("closeModal")})}))])])}var U={class:"signup"},z=Object(n["g"])("h1",{class:"header"},"Create an account",-1),I={key:0,class:"form__error"},x={class:"form__control"},R=Object(n["g"])("label",{for:"username"},"Username",-1),J={class:"form__control"},N=Object(n["g"])("label",{for:"email"},"Email",-1),H={class:"form__control"},V=Object(n["g"])("label",{for:"password"},"Password",-1),E=Object(n["g"])("button",{disabled:!1,class:"btn btn--full",type:"submit"},"Sign Up",-1),F={key:1},K=Object(n["i"])("Already have an account? ");function Y(e,t,a,c,o,r){return Object(n["w"])(),Object(n["f"])("div",U,[z,Object(n["g"])("form",{onSubmit:t[4]||(t[4]=Object(n["L"])((function(){return c.signUp&&c.signUp.apply(c,arguments)}),["prevent"])),class:"form",id:"form"},[c.isErrorShown?(Object(n["w"])(),Object(n["f"])("p",I,Object(n["D"])(c.errorMsg),1)):Object(n["e"])("",!0),Object(n["g"])("div",x,[R,Object(n["J"])(Object(n["g"])("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.username=e})},null,512),[[n["F"],c.username,void 0,{trim:!0}]])]),Object(n["g"])("div",J,[N,Object(n["J"])(Object(n["g"])("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.email=e})},null,512),[[n["F"],c.email,void 0,{trim:!0}]])]),Object(n["g"])("div",H,[V,Object(n["J"])(Object(n["g"])("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.password=e})},null,512),[[n["F"],c.password,void 0,{trim:!0}]])]),E,a.switchOption?(Object(n["w"])(),Object(n["f"])("p",F,[K,Object(n["g"])("span",{onClick:t[3]||(t[3]=function(t){return e.$emit("switch")})},"Log in")])):Object(n["e"])("",!0)],32)])}a("e9c4");var W={props:{switchOption:{type:Boolean,required:!0}},setup:function(e,t){var a=t.emit,c=Object(n["z"])(""),o=Object(n["z"])(""),r=Object(n["z"])(""),s=Object(p["b"])(),i=Object(n["z"])(!1),l=Object(n["z"])(""),d=function(){var e={username:c.value,email:o.value,password:r.value};fetch("".concat(u.baseURL,"/users/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(t){400!==t.statusCode?(i.value=!1,l.value="",fetch("".concat(u.baseURL,"/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})}).then((function(e){return e.json()})).then((function(e){s.dispatch("getUser",e.passport.user),a("closeModal")}))):(i.value=!0,l.value=t.message[0].charAt(0).toUpperCase()+t.message[0].slice(1))}))};return{signUp:d,username:c,email:o,password:r,isErrorShown:i,errorMsg:l}}};const Q=T()(W,[["render",Y]]);var X=Q,Z={class:"login"},$=Object(n["g"])("h1",{class:"header"},"Login",-1),ee={key:0,class:"form__error"},te={class:"form__control"},ae=Object(n["g"])("label",{for:"username"},"Username",-1),ne={class:"form__control"},ce=Object(n["g"])("label",{for:"password"},"Password",-1),oe=Object(n["g"])("button",{disabled:!1,class:"btn btn--full",type:"submit"},"Log In",-1),re={key:1},se=Object(n["i"])("New? ");function ie(e,t,a,c,o,r){return Object(n["w"])(),Object(n["f"])("div",Z,[$,Object(n["g"])("form",{onSubmit:t[3]||(t[3]=Object(n["L"])((function(){return c.logIn&&c.logIn.apply(c,arguments)}),["prevent"])),class:"form"},[c.isErrorShown?(Object(n["w"])(),Object(n["f"])("p",ee,"Incorrect credentials")):Object(n["e"])("",!0),Object(n["g"])("div",te,[ae,Object(n["J"])(Object(n["g"])("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.username=e})},null,512),[[n["F"],c.username,void 0,{trim:!0}]])]),Object(n["g"])("div",ne,[ce,Object(n["J"])(Object(n["g"])("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.password=e})},null,512),[[n["F"],c.password,void 0,{trim:!0}]])]),oe,a.switchOption?(Object(n["w"])(),Object(n["f"])("p",re,[se,Object(n["g"])("span",{onClick:t[2]||(t[2]=function(t){return e.$emit("switch")})},"Sign up")])):Object(n["e"])("",!0)],32)])}var le={props:{switchOption:{type:Boolean,required:!0}},setup:function(e,t){var a=t.emit,c=Object(p["b"])(),o=Object(n["z"])(""),r=Object(n["z"])(""),s=Object(n["z"])(!1),i=function(){var e={username:o.value,password:r.value};fetch("".concat(u.baseURL,"/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){c.dispatch("getUser",e.passport.user),a("closeModal"),s.value=!1})).catch((function(e){return s.value=!0}))};return{logIn:i,username:o,password:r,isErrorShown:s}}};const ue=T()(le,[["render",ie]]);var de=ue,be={props:{isLogin:{type:Boolean,required:!0}},components:{SignUp:X,LogIn:de}};const pe=T()(be,[["render",B]]);var ge=pe,je={setup:function(){b.setupSocketConnection();var e=b.getSocket(),t=Object(g["c"])(),a=Object(p["b"])(),c=Object(n["z"])(!1),o=Object(n["z"])(!1),r=Object(n["z"])(!1),s=Object(n["z"])(!0),i=Object(n["z"])(""),l=Object(n["z"])("");e.on("startGame",(function(e){o.value=!1,t.push("/play/".concat(e)),a.dispatch("getActiveGame",e)})),e.on("endGame",(function(n){"play"!==t.currentRoute.value.path.split("/")[1]&&(a.commit("unsetActiveGame"),e.off("sendMessage"),e.off("offerDraw"))})),fetch("".concat(u.baseURL,"/protected"),{method:"GET",headers:{"Access-Control-Allow-Credentials":!0},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return a.dispatch("getUser",e.passport.user)}));var d=function(){c.value=!0},j=function(){setTimeout((function(){document.querySelector("input").focus()}),0)},m=function(){c.value=!1},O=function(e){o.value=!0,i.value=e.mode,l.value=e.timeMode},f=function(){o.value=!1,b.cancelSearch(i.value,l.value,a.getters.user.username)};return Object(n["s"])(b.disconnect),{isModalVisible:c,isSearchVisible:o,isModalLogIn:r,homeToRegister:s,showModal:d,focusOnInput:j,closeModal:m,showSearch:O,searchMode:i,searchTimeMode:l,cancelSearch:f}},components:{Navbar:q,ModalAuth:ge}};const me=T()(je,[["render",r]]);var Oe=me,fe=(a("a434"),{class:"base-grid"}),ve={class:"grid__item"},he={class:"grid__item"},we={key:2,class:"profile-briefly"},_e={class:"profile-briefly__general"},ye={class:"general__username"},De={class:"general__date"},Ae={class:"profile-briefly__stats"},Se=Object(n["g"])("div",{class:"stats__headers"},[Object(n["g"])("p",{class:"headers__name"},"Mode"),Object(n["g"])("p",{class:"headers__rating"},"Rating"),Object(n["g"])("p",{class:"headers__games"},"Games")],-1),ke={class:"stats__numbers"},Me={class:"numbers__mode"},Ce=Object(n["g"])("h3",{class:"mode__name"},"Bullet",-1),Te={class:"mode__rating"},Le={class:"mode__total-games"},qe={class:"numbers__mode"},Ge=Object(n["g"])("h3",{class:"mode__name"},"Blitz",-1),Pe={class:"mode__rating"},Be={class:"mode__total-games"},Ue={class:"numbers__mode"},ze=Object(n["g"])("h3",{class:"mode__name"},"Rapid",-1),Ie={class:"mode__rating"},xe={class:"mode__total-games"},Re={class:"grid__item"};function Je(e,t,a,c,o,r){var s=Object(n["B"])("Play"),i=Object(n["B"])("SignUp"),l=Object(n["B"])("LogIn"),u=Object(n["B"])("router-link"),d=Object(n["B"])("Leaderboards");return Object(n["w"])(),Object(n["f"])("div",fe,[Object(n["g"])("div",ve,[Object(n["j"])(s,{onShowSearch:t[0]||(t[0]=function(t){return e.$emit("showSearch",t)})})]),Object(n["g"])("div",he,[!c.authenticated&&a.homeToRegister?(Object(n["w"])(),Object(n["d"])(i,{key:0,switchOption:!0,onSwitch:t[1]||(t[1]=function(t){return e.$emit("switchToRegister")})})):c.authenticated||a.homeToRegister?(Object(n["w"])(),Object(n["f"])("div",we,[Object(n["g"])("div",_e,[Object(n["j"])(u,{to:"/profile/".concat(c.info.username)},{default:Object(n["I"])((function(){return[Object(n["g"])("h1",ye,Object(n["D"])(c.info.username.length>10?c.info.username.splice(0,10)+"..":c.info.username),1)]})),_:1},8,["to"]),Object(n["g"])("h2",De,Object(n["D"])(new Date(c.info.registrationDate).toDateString().slice(4)),1)]),Object(n["g"])("div",Ae,[Se,Object(n["g"])("div",ke,[Object(n["g"])("div",Me,[Ce,Object(n["g"])("p",Te,Object(n["D"])(c.info.stats.bullet.elo),1),Object(n["g"])("p",Le,Object(n["D"])(c.info.stats.bullet.totalGames),1)]),Object(n["g"])("div",qe,[Ge,Object(n["g"])("p",Pe,Object(n["D"])(c.info.stats.blitz.elo),1),Object(n["g"])("p",Be,Object(n["D"])(c.info.stats.blitz.totalGames),1)]),Object(n["g"])("div",Ue,[ze,Object(n["g"])("p",Ie,Object(n["D"])(c.info.stats.rapid.elo),1),Object(n["g"])("p",xe,Object(n["D"])(c.info.stats.rapid.totalGames),1)])])])])):(Object(n["w"])(),Object(n["d"])(l,{key:1,switchOption:!0,onSwitch:t[2]||(t[2]=function(t){return e.$emit("switchToRegister")})}))]),Object(n["g"])("div",Re,[Object(n["j"])(d,{detailed:!1,playersAmount:5})])])}var Ne={class:"play"},He=Object(n["g"])("h1",{class:"header"},"Play",-1),Ve={class:"play__time-modes"},Ee={class:"time-modes__mode"},Fe=Object(n["g"])("p",{class:"mode__name"},"Bullet",-1),Ke={class:"mode__options"},Ye={class:"time-modes__mode"},We=Object(n["g"])("p",{class:"mode__name"},"Blitz",-1),Qe={class:"mode__options"},Xe={class:"time-modes__mode"},Ze=Object(n["g"])("p",{class:"mode__name"},"Rapid",-1),$e={class:"mode__options"},et=["disabled"];function tt(e,t,a,c,o,r){return Object(n["w"])(),Object(n["f"])("div",Ne,[He,Object(n["g"])("div",Ve,[Object(n["g"])("div",Ee,[Fe,Object(n["g"])("div",Ke,[Object(n["g"])("button",{onClick:t[0]||(t[0]=function(e){c.selectedTime="1"===c.selectedTime?"":"1",c.selectedMode="bullet"}),class:Object(n["p"])(["btn","1"===c.selectedTime?"btn--chosen":""])},"1",2),Object(n["g"])("button",{onClick:t[1]||(t[1]=function(e){c.selectedTime="1|1"===c.selectedTime?"":"1|1",c.selectedMode="bullet"}),class:Object(n["p"])(["btn","1|1"===c.selectedTime?"btn--chosen":""])},"1|1",2),Object(n["g"])("button",{onClick:t[2]||(t[2]=function(e){c.selectedTime="2|1"===c.selectedTime?"":"2|1",c.selectedMode="bullet"}),class:Object(n["p"])(["btn","2|1"===c.selectedTime?"btn--chosen":""])},"2|1",2)])]),Object(n["g"])("div",Ye,[We,Object(n["g"])("div",Qe,[Object(n["g"])("button",{onClick:t[3]||(t[3]=function(e){c.selectedTime="3"===c.selectedTime?"":"3",c.selectedMode="blitz"}),class:Object(n["p"])(["btn","3"===c.selectedTime?"btn--chosen":""])},"3",2),Object(n["g"])("button",{onClick:t[4]||(t[4]=function(e){c.selectedTime="3|2"===c.selectedTime?"":"3|2",c.selectedMode="blitz"}),class:Object(n["p"])(["btn","3|2"===c.selectedTime?"btn--chosen":""])},"3|2",2),Object(n["g"])("button",{onClick:t[5]||(t[5]=function(e){c.selectedTime="5"===c.selectedTime?"":"5",c.selectedMode="blitz"}),class:Object(n["p"])(["btn","5"===c.selectedTime?"btn--chosen":""])},"5",2)])]),Object(n["g"])("div",Xe,[Ze,Object(n["g"])("div",$e,[Object(n["g"])("button",{onClick:t[6]||(t[6]=function(e){c.selectedTime="10"===c.selectedTime?"":"10",c.selectedMode="rapid"}),class:Object(n["p"])(["btn","10"===c.selectedTime?"btn--chosen":""])},"10",2),Object(n["g"])("button",{onClick:t[7]||(t[7]=function(e){c.selectedTime="15|10"===c.selectedTime?"":"15|10",c.selectedMode="rapid"}),class:Object(n["p"])(["btn","15|10"===c.selectedTime?"btn--chosen":""])},"15|10",2),Object(n["g"])("button",{onClick:t[8]||(t[8]=function(e){c.selectedTime="30"===c.selectedTime?"":"30",c.selectedMode="rapid"}),class:Object(n["p"])(["btn","30"===c.selectedTime?"btn--chosen":""])},"30",2)])])]),Object(n["g"])("button",{onClick:t[9]||(t[9]=function(){return c.startSearch&&c.startSearch.apply(c,arguments)}),disabled:""===c.selectedTime||!c.authenticated||c.hasActiveGame,class:"play__play-btn btn btn--full"},"Play",8,et)])}var at={setup:function(e,t){var a=t.emit,c=Object(p["b"])(),o=Object(n["z"])(""),r=Object(n["z"])(""),s=Object(n["b"])((function(){var e;return null!=(null===(e=c.getters.user)||void 0===e?void 0:e._id)})),i=Object(n["b"])((function(){var e;return null!=(null===(e=c.getters.activeGame)||void 0===e?void 0:e._id)})),l=Object(n["b"])((function(){return c.getters.user})),u=function(){s.value&&!i.value&&(b.startSearch(r.value,o.value,l.value.username,l.value.stats[r.value].elo),a("showSearch",{mode:r.value,timeMode:o.value}))};return{selectedTime:o,selectedMode:r,authenticated:s,hasActiveGame:i,user:l,startSearch:u}}};const nt=T()(at,[["render",tt]]);var ct=nt,ot={class:"leaderboards"},rt=Object(n["g"])("h1",{class:"header"},"Leaderboards",-1),st={class:"leaderboards__tables"},it={class:"tables__table"},lt=Object(n["g"])("p",{class:"table__mode-name"},"Bullet",-1),ut=Object(n["i"])("See All"),dt={class:"tables__table"},bt=Object(n["g"])("p",{class:"table__mode-name"},"Blitz",-1),pt=Object(n["i"])("See All"),gt={class:"tables__table"},jt=Object(n["g"])("p",{class:"table__mode-name"},"Rapid",-1),mt=Object(n["i"])("See All");function Ot(e,t,a,c,o,r){var s=Object(n["B"])("Leaderboard"),i=Object(n["B"])("router-link");return Object(n["w"])(),Object(n["f"])("div",ot,[rt,Object(n["g"])("div",st,[Object(n["g"])("div",it,[lt,Object(n["j"])(s,{detailed:a.detailed,playersAmount:a.playersAmount,mode:"bullet"},null,8,["detailed","playersAmount"]),a.detailed?(Object(n["w"])(),Object(n["d"])(i,{key:0,class:"table__see-all",to:"/leaderboard/bullet/1"},{default:Object(n["I"])((function(){return[ut]})),_:1})):Object(n["e"])("",!0)]),Object(n["g"])("div",dt,[bt,Object(n["j"])(s,{detailed:a.detailed,playersAmount:a.playersAmount,mode:"blitz"},null,8,["detailed","playersAmount"]),a.detailed?(Object(n["w"])(),Object(n["d"])(i,{key:0,class:"table__see-all",to:"/leaderboard/blitz/1"},{default:Object(n["I"])((function(){return[pt]})),_:1})):Object(n["e"])("",!0)]),Object(n["g"])("div",gt,[jt,Object(n["j"])(s,{detailed:a.detailed,playersAmount:a.playersAmount,mode:"rapid"},null,8,["detailed","playersAmount"]),a.detailed?(Object(n["w"])(),Object(n["d"])(i,{key:0,class:"table__see-all",to:"/leaderboard/rapid/1"},{default:Object(n["I"])((function(){return[mt]})),_:1})):Object(n["e"])("",!0)])])])}a("a9e3"),a("b680");var ft={class:"leaderboard"},vt={key:0,class:"table__players"},ht={key:0,class:"players__headers"},wt=Object(n["h"])('<p class="headers__rank">Rank</p><p class="headers__name">Player</p><p class="headers__rating">Rating</p><p class="headers__games">Games</p><p class="headers__won">Won</p><p class="headers__lost">Lost</p><p class="headers__draw">Draw</p>',7),_t=[wt],yt={class:"player__name"},Dt={class:"player__elo"},At={key:0,class:"player__total-games"},St={key:1,class:"player__stats"},kt={class:"stats__won"},Mt={class:"stats__lost"},Ct={class:"stats__draw"};function Tt(e,t,a,c,o,r){var s=Object(n["B"])("router-link");return Object(n["w"])(),Object(n["f"])("div",ft,[c.isLoading?Object(n["e"])("",!0):(Object(n["w"])(),Object(n["f"])("div",vt,[a.detailed?(Object(n["w"])(),Object(n["f"])("div",ht,_t)):Object(n["e"])("",!0),(Object(n["w"])(!0),Object(n["f"])(n["a"],null,Object(n["A"])(c.players,(function(e,t){return Object(n["w"])(),Object(n["d"])(s,{key:e._id,to:"/profile/".concat(e.username),class:"players__player"},{default:Object(n["I"])((function(){return[Object(n["g"])("div",{class:Object(n["p"])(["player__place",t+1+a.playersAmount*(a.page-1)===1?"player__place--first":t+1+a.playersAmount*(a.page-1)===2?"player__place--second":t+1+a.playersAmount*(a.page-1)===3?"player__place--third":""])},Object(n["D"])(t+1+a.playersAmount*(a.page-1)),3),Object(n["g"])("div",yt,Object(n["D"])(e.username),1),Object(n["g"])("div",Dt,Object(n["D"])(e.stats[a.mode].elo),1),a.detailed?(Object(n["w"])(),Object(n["f"])("div",At,Object(n["D"])(e.stats[a.mode].totalGames),1)):Object(n["e"])("",!0),a.detailed?(Object(n["w"])(),Object(n["f"])("div",St,[Object(n["g"])("span",kt,Object(n["D"])((Math.round(e.stats[a.mode].won/e.stats[a.mode].totalGames*1e3)/10).toFixed(1))+"%",1),Object(n["g"])("span",Mt,Object(n["D"])((Math.round(e.stats[a.mode].lost/e.stats[a.mode].totalGames*1e3)/10).toFixed(1))+"%",1),Object(n["g"])("span",Ct,Object(n["D"])((Math.round(e.stats[a.mode].draw/e.stats[a.mode].totalGames*1e3)/10).toFixed(1))+"%",1)])):Object(n["e"])("",!0)]})),_:2},1032,["to"])})),128))]))])}a("4e82");var Lt={props:{detailed:{type:Boolean,required:!0},playersAmount:{type:Number,required:!0,default:5},mode:{type:String,required:!0,validator:function(e){return["bullet","blitz","rapid"].includes(e)}},page:{type:[String,Number],required:!1,default:1}},setup:function(e,t){var a=t.emit,c=Object(n["z"])(!0),o=Object(n["z"])([]),r=function(){a("loading"),c.value=!0,fetch("".concat(u.baseURL,"/users")).then((function(e){return e.json()})).then((function(t){var n=[];c.value=!1,"bullet"===e.mode?(n=t.sort((function(e,t){return t.stats.bullet.elo-e.stats.bullet.elo})),a("changeTotalPagesVal",Math.ceil(n.length/e.playersAmount))):"blitz"===e.mode?(n=t.sort((function(e,t){return t.stats.blitz.elo-e.stats.blitz.elo})),a("changeTotalPagesVal",Math.ceil(n.length/e.playersAmount))):"rapid"===e.mode&&(n=t.sort((function(e,t){return t.stats.rapid.elo-e.stats.rapid.elo})),a("changeTotalPagesVal",Math.ceil(n.length/e.playersAmount))),o.value=n.filter((function(t,a){return a>(e.page-1)*e.playersAmount&&a<=e.page*e.playersAmount}))}))};return Object(n["u"])(r),Object(n["H"])((function(){return[e.mode,e.page]}),r),{players:o,isLoading:c,fetchLeaders:r}}};const qt=T()(Lt,[["render",Tt]]);var Gt=qt,Pt={props:{detailed:{type:Boolean,required:!0},playersAmount:{type:Number,required:!0,default:5}},components:{Leaderboard:Gt}};const Bt=T()(Pt,[["render",Ot]]);var Ut=Bt,zt={props:{homeToRegister:{type:Boolean,required:!0}},setup:function(e){var t=Object(p["b"])(),a=Object(n["b"])((function(){var e;return null!=(null===(e=t.getters.user)||void 0===e?void 0:e._id)})),c=Object(n["b"])((function(){return t.getters.user}));return{info:c,authenticated:a}},components:{SignUp:X,LogIn:de,Play:ct,Leaderboards:Ut}};const It=T()(zt,[["render",Je]]);var xt=It,Rt={class:"base-container"},Jt={class:"grid__item"},Nt={class:"profile-layout"},Ht={key:0,class:"info"},Vt={class:"tabs"},Et={key:1,id:"stats",class:"tab__content tab__content--active"},Ft={key:2,id:"games",class:"tab__content"},Kt=Object(n["h"])('<div class="games__headers"><p class="headers__players">Players</p><p class="headers__score">Score</p><p class="headers__mode">Mode</p><p class="headers__moves">Moves</p><p class="headers__date">Date</p></div>',1),Yt={class:"game__players"},Wt={class:"game__score"},Qt={key:2,class:"game__live"},Xt={class:"game__mode"},Zt={class:"game__moves"},$t={key:0},ea={key:1,class:"game__live"},ta={class:"game__date"},aa={key:3},na=Object(n["g"])("p",null,"No games have been played yet",-1),ca=[na];function oa(e,t,a,c,o,r){var s=Object(n["B"])("ModeStats"),i=Object(n["B"])("router-link");return Object(n["w"])(),Object(n["f"])("div",Rt,[Object(n["g"])("div",Jt,[Object(n["g"])("div",Nt,[c.isLoading?Object(n["e"])("",!0):(Object(n["w"])(),Object(n["f"])("div",Ht,[Object(n["g"])("h1",null,Object(n["D"])(c.user.username),1),Object(n["g"])("h3",null,Object(n["D"])(new Date(c.user.registrationDate).toDateString().slice(4)),1)])),Object(n["g"])("div",Vt,[Object(n["g"])("button",{class:Object(n["p"])(["btn",c.showStats?"btn--chosen":""]),onClick:t[0]||(t[0]=function(e){return c.showStats=!0})},"Stats",2),Object(n["g"])("button",{class:Object(n["p"])(["btn",c.showStats?"":"btn--chosen"]),onClick:t[1]||(t[1]=function(e){return c.showStats=!1})},"Games",2)]),c.isLoading?Object(n["e"])("",!0):Object(n["J"])((Object(n["w"])(),Object(n["f"])("div",Et,[Object(n["j"])(s,{mode:"bullet",stats:c.user.stats},null,8,["stats"]),Object(n["j"])(s,{mode:"blitz",stats:c.user.stats},null,8,["stats"]),Object(n["j"])(s,{mode:"rapid",stats:c.user.stats},null,8,["stats"])],512)),[[n["G"],c.showStats]]),c.isLoading||0===c.games.length?0===c.games.length?Object(n["J"])((Object(n["w"])(),Object(n["f"])("div",aa,ca,512)),[[n["G"],!c.showStats]]):Object(n["e"])("",!0):Object(n["J"])((Object(n["w"])(),Object(n["f"])("div",Ft,[Kt,(Object(n["w"])(!0),Object(n["f"])(n["a"],null,Object(n["A"])(c.games,(function(e){return Object(n["w"])(),Object(n["f"])("div",{key:e.id,class:"games__game"},[Object(n["g"])("div",Yt,[Object(n["j"])(i,{to:"/profile/".concat(e.white.username),onClick:t[2]||(t[2]=function(e){return c.showStats=!0})},{default:Object(n["I"])((function(){return[Object(n["i"])(Object(n["D"])(e.white.username)+"("+Object(n["D"])(e.white.eloAtTheTime)+")",1)]})),_:2},1032,["to"]),Object(n["j"])(i,{to:"/profile/".concat(e.black.username),onClick:t[3]||(t[3]=function(e){return c.showStats=!0})},{default:Object(n["I"])((function(){return[Object(n["i"])(Object(n["D"])(e.black.username)+"("+Object(n["D"])(e.black.eloAtTheTime)+")",1)]})),_:2},1032,["to"])]),Object(n["g"])("div",Wt,[e.isFinished?(Object(n["w"])(),Object(n["f"])("p",{key:0,class:Object(n["p"])(1===e.white.score&&1===e.black.score?"":1===e.white.score?"score--green":"score--red")},Object(n["D"])(e.white.score),3)):Object(n["e"])("",!0),e.isFinished?(Object(n["w"])(),Object(n["f"])("p",{key:1,class:Object(n["p"])(1===e.white.score&&1===e.black.score?"":1===e.white.score?"score--red":"score--green")},Object(n["D"])(e.black.score),3)):Object(n["e"])("",!0),e.isFinished?Object(n["e"])("",!0):(Object(n["w"])(),Object(n["f"])("p",Qt,"LIVE"))]),Object(n["g"])("div",Xt,[Object(n["g"])("p",null,Object(n["D"])(e.mode.charAt(0).toUpperCase()+e.mode.slice(1)),1)]),Object(n["g"])("div",Zt,[e.isFinished?(Object(n["w"])(),Object(n["f"])("p",$t,Object(n["D"])(e.moves),1)):Object(n["e"])("",!0),e.isFinished?Object(n["e"])("",!0):(Object(n["w"])(),Object(n["f"])("p",ea,"LIVE"))]),Object(n["g"])("div",ta,[Object(n["g"])("p",null,Object(n["D"])(new Date(e.date).toDateString().slice(4)),1)])])})),128))],512)),[[n["G"],!c.showStats]])])])])}a("5319");var ra={class:"stats__mode"},sa={class:"mode__name header"},ia={class:"mode__general"},la={class:"general__elo"},ua={class:"elo__value"},da=Object(n["g"])("p",null,"Rating",-1),ba={class:"general__total-games"},pa={class:"total-games__value"},ga=Object(n["g"])("p",null,"Total games",-1),ja={key:0,class:"mode__game-bar"},ma={class:"game-bar__header game-bar--top"},Oa={key:0,class:"game-bar__bar"},fa={class:"game-bar__header game-bar--bottom"};function va(e,t,a,c,o,r){return Object(n["w"])(),Object(n["f"])("div",ra,[Object(n["g"])("h2",sa,Object(n["D"])("bullet"===a.mode?"Bullet":"blitz"===a.mode?"Blitz":"Rapid"),1),Object(n["g"])("div",ia,[Object(n["g"])("div",la,[Object(n["g"])("h3",ua,Object(n["D"])("bullet"===a.mode?a.stats.bullet.elo:"blitz"===a.mode?a.stats.blitz.elo:a.stats.rapid.elo),1),da]),Object(n["g"])("div",ba,[Object(n["g"])("h3",pa,Object(n["D"])("bullet"===a.mode?a.stats.bullet.totalGames:"blitz"===a.mode?a.stats.blitz.totalGames:a.stats.rapid.totalGames),1),ga])]),"bullet"===a.mode&&0!==c.info.bullet.totalGames||"blitz"===a.mode&&0!==c.info.blitz.totalGames||"rapid"===a.mode&&0!==c.info.rapid.totalGames?(Object(n["w"])(),Object(n["f"])("div",ja,[Object(n["g"])("div",ma,[Object(n["g"])("span",{class:"game-bar__section game-bar--green",style:Object(n["q"])({"flex-basis":c.wonPercentToUse+"%"})},Object(n["D"])(c.wonPercentToUse)+"%",5),Object(n["g"])("span",{class:"game-bar__section game-bar--grey",style:Object(n["q"])({"flex-basis":c.drawPercentToUse+"%"})},Object(n["D"])(c.drawPercentToUse)+"%",5),Object(n["g"])("span",{class:"game-bar__section game-bar--red",style:Object(n["q"])({"flex-basis":c.lostPercentToUse+"%"})},Object(n["D"])(c.lostPercentToUse)+"%",5)]),"bullet"===a.mode&&0!==c.info.bullet.totalGames||"blitz"===a.mode&&0!==c.info.blitz.totalGames||"rapid"===a.mode&&0!==c.info.rapid.totalGames?(Object(n["w"])(),Object(n["f"])("div",Oa,[Object(n["g"])("span",{class:"game-bar__section game-bar--green",style:Object(n["q"])({"flex-grow":c.wonPercentToUse})},null,4),Object(n["g"])("span",{class:"game-bar__section game-bar--grey",style:Object(n["q"])({"flex-grow":c.drawPercentToUse})},null,4),Object(n["g"])("span",{class:"game-bar__section game-bar--red",style:Object(n["q"])({"flex-grow":c.lostPercentToUse})},null,4)])):Object(n["e"])("",!0),Object(n["g"])("div",fa,[Object(n["g"])("span",{class:"game-bar__section game-bar--green",style:Object(n["q"])({"flex-basis":c.wonPercentToUse+"%"})},Object(n["D"])("bullet"===a.mode?a.stats.bullet.won:"blitz"===a.mode?a.stats.blitz.won:a.stats.rapid.won)+" Won",5),Object(n["g"])("span",{class:"game-bar__section game-bar--grey",style:Object(n["q"])({"flex-basis":c.drawPercentToUse+"%"})},Object(n["D"])("bullet"===a.mode?a.stats.bullet.draw:"blitz"===a.mode?a.stats.blitz.draw:a.stats.rapid.draw)+" Drawn",5),Object(n["g"])("span",{class:"game-bar__section game-bar--red",style:Object(n["q"])({"flex-basis":c.lostPercentToUse+"%"})},Object(n["D"])("bullet"===a.mode?a.stats.bullet.lost:"blitz"===a.mode?a.stats.blitz.lost:a.stats.rapid.lost)+" Lost",5)])])):Object(n["e"])("",!0)])}var ha={props:{mode:{type:String,required:!0,validator:function(e){return["bullet","blitz","rapid"].includes(e)}},stats:{type:Object,required:!0}},setup:function(e){var t=Object(n["y"])(e.stats),a=Object(n["b"])((function(){return Math.round(t.bullet.won/t.bullet.totalGames*100)})),c=Object(n["b"])((function(){return Math.round(t.bullet.lost/t.bullet.totalGames*100)})),o=Object(n["b"])((function(){return Math.round(100-a.value-c.value)})),r=Object(n["b"])((function(){return Math.round(t.blitz.won/t.blitz.totalGames*100)})),s=Object(n["b"])((function(){return Math.round(t.blitz.lost/t.blitz.totalGames*100)})),i=Object(n["b"])((function(){return Math.round(100-r.value-s.value)})),l=Object(n["b"])((function(){return Math.round(t.rapid.won/t.rapid.totalGames*100)})),u=Object(n["b"])((function(){return Math.round(t.rapid.lost/t.rapid.totalGames*100)})),d=Object(n["b"])((function(){return Math.round(100-l.value-u.value)})),b=Object(n["b"])((function(){return"bullet"===e.mode?a.value:"blitz"===e.mode?r.value:l.value})),p=Object(n["b"])((function(){return"bullet"===e.mode?o.value:"blitz"===e.mode?i.value:d.value})),g=Object(n["b"])((function(){return"bullet"===e.mode?c.value:"blitz"===e.mode?s.value:u.value}));return{info:t,wonPercentToUse:b,drawPercentToUse:p,lostPercentToUse:g}}};const wa=T()(ha,[["render",va]]);var _a=wa,ya={props:{username:{type:String,required:!0}},setup:function(e){var t=Object(p["b"])(),a=Object(g["c"])(),c=Object(n["z"])(!0),o=Object(n["z"])(!0),r=Object(n["z"])({}),s=Object(n["z"])([]),i=function(){var n;(null===(n=t.getters.user)||void 0===n?void 0:n.username)===e.username?(r.value=t.getters.user,o.value=!1):fetch("".concat(u.baseURL,"/users/").concat(e.username)).then((function(e){return e.json()})).then((function(e){r.value=e,o.value=!1})).catch((function(){return a.replace("/")})),fetch("".concat(u.baseURL,"/games?username=").concat(e.username)).then((function(e){return e.json()})).then((function(e){s.value=e.sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()})),o.value=!1}))};return i(),Object(n["H"])((function(){return e.username}),i),{showStats:c,user:r,games:s,initializeUser:i,isLoading:o}},components:{ModeStats:_a}};const Da=T()(ya,[["render",oa]]);var Aa=Da,Sa={class:"base-flex"},ka={class:"grid__item"};function Ma(e,t,a,c,o,r){var s,i=Object(n["B"])("BoardSection"),l=Object(n["B"])("Sidebar"),u=Object(n["B"])("ModalEndgame");return Object(n["w"])(),Object(n["f"])("div",Sa,[Object(n["g"])("div",ka,[Object(n["j"])(i,{gameStarted:!!a.id,gameData:c.gameData,joinedChat:c.joinedChat,onSetMoves:t[0]||(t[0]=function(e){return c.moves=e}),onEndGame:t[1]||(t[1]=function(e,t){return c.endGame(e=e,t=t)})},null,8,["gameStarted","gameData","joinedChat"])]),Object(n["j"])(l,{gameStarted:!!a.id,joinedChat:c.joinedChat,savedChat:null===(s=c.gameData)||void 0===s?void 0:s.chat,onShowSearch:t[2]||(t[2]=function(t){return e.$emit("showSearch",t)}),onSurrender:t[3]||(t[3]=function(){return c.user.username===c.gameData.black.username?c.endGame(e.whiteScore=1,e.blackScore=0):c.endGame(e.whiteScore=0,e.blakcScore=1)}),onDraw:t[4]||(t[4]=function(e){return c.endGame(1,1)}),onOfferDraw:c.offerDraw},null,8,["gameStarted","joinedChat","savedChat","onOfferDraw"]),c.isModalVisible?(Object(n["w"])(),Object(n["d"])(u,{key:0,gameData:c.gameData,resultData:c.resultData,onCloseModal:c.closeModalAndRedirect},null,8,["gameData","resultData","onCloseModal"])):Object(n["e"])("",!0)])}var Ca={class:"layout-board-section"},Ta={class:"layout__player layout__player--top"},La={class:"player__info"},qa={key:1},Ga={key:0,class:"player__timer"},Pa={class:"layout__player layout__player--bottom"},Ba={class:"player__info"},Ua={key:1},za={key:0,class:"player__timer"};function Ia(e,t,a,c,o,r){var s,i,l,u,d,b,p,g,j,m,O,f,v,h,w,_,y,D,A,S,k,M,C,T,L,q=Object(n["B"])("router-link"),G=Object(n["B"])("ModalPromotion");return Object(n["w"])(),Object(n["f"])("div",Ca,[Object(n["g"])("div",Ta,[Object(n["g"])("p",La,[a.gameStarted&&null!==(s=a.gameData)&&void 0!==s&&s._id?(Object(n["w"])(),Object(n["d"])(q,{key:0,to:"/profile/".concat(c.isFlipped?null===(u=a.gameData)||void 0===u||null===(d=u.white)||void 0===d?void 0:d.username:null===(i=a.gameData)||void 0===i||null===(l=i.black)||void 0===l?void 0:l.username)},{default:Object(n["I"])((function(){var e,t,o,r;return[Object(n["i"])(Object(n["D"])(c.isFlipped?null===(o=a.gameData)||void 0===o||null===(r=o.white)||void 0===r?void 0:r.username:null===(e=a.gameData)||void 0===e||null===(t=e.black)||void 0===t?void 0:t.username),1)]})),_:1},8,["to"])):(Object(n["w"])(),Object(n["f"])("span",qa,Object(n["D"])("Opponent"))),Object(n["i"])(" "+Object(n["D"])(a.gameStarted&&null!==(b=a.gameData)&&void 0!==b&&b._id?"(".concat(c.isFlipped?null===(j=a.gameData)||void 0===j||null===(m=j.white)||void 0===m?void 0:m.eloAtTheTime:null===(p=a.gameData)||void 0===p||null===(g=p.black)||void 0===g?void 0:g.eloAtTheTime,")"):""),1)]),-1!==c.whiteTime&&a.gameStarted&&null!==(O=a.gameData)&&void 0!==O&&O._id?(Object(n["w"])(),Object(n["f"])("div",Ga,[Object(n["g"])("span",null,Object(n["D"])(new Date(1e3*(c.isFlipped?c.whiteTime:c.blackTime)).toISOString().substr(14,5)),1)])):Object(n["e"])("",!0)]),Object(n["g"])("div",{class:Object(n["p"])(["layout__board",c.isFlipped?"flipped":""]),onMousedown:t[32]||(t[32]=function(){return c.resetBoard&&c.resetBoard.apply(c,arguments)})},[(Object(n["w"])(),Object(n["f"])(n["a"],null,Object(n["A"])(64,(function(e){return Object(n["g"])("div",{key:e,class:"square"})})),64)),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[0]||(t[0]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece br square-18"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[1]||(t[1]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bn square-28"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[2]||(t[2]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bb square-38"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[3]||(t[3]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bq square-48"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[4]||(t[4]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bk square-58"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[5]||(t[5]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bb square-68"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[6]||(t[6]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bn square-78"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[7]||(t[7]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece br square-88"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[8]||(t[8]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bp square-17"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[9]||(t[9]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bp square-27"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[10]||(t[10]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bp square-37"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[11]||(t[11]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bp square-47"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[12]||(t[12]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bp square-57"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[13]||(t[13]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bp square-67"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[14]||(t[14]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bp square-77"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[15]||(t[15]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece bp square-87"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[16]||(t[16]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wr square-11"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[17]||(t[17]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wn square-21"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[18]||(t[18]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wb square-31"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[19]||(t[19]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wq square-41"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[20]||(t[20]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wk square-51"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[21]||(t[21]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wb square-61"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[22]||(t[22]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wn square-71"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[23]||(t[23]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wr square-81"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[24]||(t[24]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wp square-12"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[25]||(t[25]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wp square-22"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[26]||(t[26]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wp square-32"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[27]||(t[27]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wp square-42"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[28]||(t[28]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wp square-52"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[29]||(t[29]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wp square-62"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[30]||(t[30]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wp square-72"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]]),Object(n["J"])(Object(n["g"])("div",{onMousedown:t[31]||(t[31]=function(){return c.startMoving&&c.startMoving.apply(c,arguments)}),class:"piece wp square-82"},null,544),[[n["G"],a.joinedChat&&c.gotData||!a.gameStarted]])],34),Object(n["g"])("div",Pa,[Object(n["g"])("p",Ba,[a.gameStarted&&null!==(f=a.gameData)&&void 0!==f&&f._id&&null!==(v=c.user)&&void 0!==v&&v.username?(Object(n["w"])(),Object(n["d"])(q,{key:0,to:"/profile/".concat(c.isFlipped?null===(_=a.gameData)||void 0===_||null===(y=_.black)||void 0===y?void 0:y.username:null===(h=a.gameData)||void 0===h||null===(w=h.white)||void 0===w?void 0:w.username)},{default:Object(n["I"])((function(){var e,t,o,r;return[Object(n["i"])(Object(n["D"])(c.isFlipped?null===(o=a.gameData)||void 0===o||null===(r=o.black)||void 0===r?void 0:r.username:null===(e=a.gameData)||void 0===e||null===(t=e.white)||void 0===t?void 0:t.username),1)]})),_:1},8,["to"])):(Object(n["w"])(),Object(n["f"])("span",Ua,Object(n["D"])(null!==(D=null===(A=c.user)||void 0===A?void 0:A.username)&&void 0!==D?D:"User"),1)),Object(n["i"])(" "+Object(n["D"])(a.gameStarted&&null!==(S=a.gameData)&&void 0!==S&&S._id?"(".concat(c.isFlipped?null===(C=a.gameData)||void 0===C||null===(T=C.black)||void 0===T?void 0:T.eloAtTheTime:null===(k=a.gameData)||void 0===k||null===(M=k.white)||void 0===M?void 0:M.eloAtTheTime,")"):""),1)]),-1!==c.whiteTime&&a.gameStarted&&null!==(L=a.gameData)&&void 0!==L&&L._id?(Object(n["w"])(),Object(n["f"])("div",za,[Object(n["g"])("span",null,Object(n["D"])(new Date(1e3*(c.isFlipped?c.blackTime:c.whiteTime)).toISOString().substr(14,5)),1)])):Object(n["e"])("",!0)]),c.isModalVisible?(Object(n["w"])(),Object(n["d"])(G,{key:0,onCloseModal:c.closeModal,onChoosePiece:t[33]||(t[33]=function(e){return c.choosePromotionPiece(e)}),color:c.user.username===a.gameData.white.username?"white":"black"},null,8,["onCloseModal","color"])):Object(n["e"])("",!0)])}var xa=a("b85c"),Ra=a("2909"),Ja=(a("a630"),a("3ca3"),a("7db0"),a("2532"),a("25f0"),a("b0c0"),a("159b"),a("c740"),a("4b8e")),Na=a.n(Ja),Ha=a("cde0"),Va=a.n(Ha),Ea=a("c8e0"),Fa=a.n(Ea),Ka=a("ab22"),Ya=a.n(Ka),Wa=a("98a1"),Qa=a.n(Wa),Xa=a("55a1"),Za=a.n(Xa),$a=a("ec76"),en=a.n($a),tn=a("bd71"),an=a.n(tn),nn={class:"modal-backdrop"},cn={class:"modal modal--promotion"},on={key:0,class:"modal__pieces"},rn={key:1,class:"modal__pieces"};function sn(e,t,a,c,o,r){return Object(n["w"])(),Object(n["f"])("div",nn,[Object(n["g"])("div",cn,[Object(n["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.$emit("closeModal")}),class:"modal__close"},"Ã—"),"black"===a.color?(Object(n["w"])(),Object(n["f"])("div",on,[Object(n["g"])("img",{onClick:t[1]||(t[1]=function(t){return e.$emit("choosePiece","q")}),class:"pieces__piece",src:Na.a}),Object(n["g"])("img",{onClick:t[2]||(t[2]=function(t){return e.$emit("choosePiece","n")}),class:"pieces__piece",src:Va.a}),Object(n["g"])("img",{onClick:t[3]||(t[3]=function(t){return e.$emit("choosePiece","r")}),class:"pieces__piece",src:Fa.a}),Object(n["g"])("img",{onClick:t[4]||(t[4]=function(t){return e.$emit("choosePiece","b")}),class:"pieces__piece",src:Ya.a})])):"white"===a.color?(Object(n["w"])(),Object(n["f"])("div",rn,[Object(n["g"])("img",{onClick:t[5]||(t[5]=function(t){return e.$emit("choosePiece","q")}),class:"pieces__piece",src:Qa.a}),Object(n["g"])("img",{onClick:t[6]||(t[6]=function(t){return e.$emit("choosePiece","n")}),class:"pieces__piece",src:Za.a}),Object(n["g"])("img",{onClick:t[7]||(t[7]=function(t){return e.$emit("choosePiece","r")}),class:"pieces__piece",src:en.a}),Object(n["g"])("img",{onClick:t[8]||(t[8]=function(t){return e.$emit("choosePiece","b")}),class:"pieces__piece",src:an.a})])):Object(n["e"])("",!0)])])}var ln={props:{color:{required:!0,type:String,validator:function(e){return["black","white"].includes(e)}}}};const un=T()(ln,[["render",sn]]);var dn=un,bn={props:{gameData:{required:!1,type:Object},gameStarted:{required:!0,type:Boolean},joinedChat:{required:!0,type:Boolean}},setup:function(e,t){var a=t.emit,c=Object(p["b"])(),o=b.getSocket(),r=[["R","N","B","K","Q","B","N","R"],["P","P","P","P","P","P","P","P"],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["p","p","p","p","p","p","p","p"],["r","n","b","k","q","b","n","r"]],s=Object(n["z"])(!1),i=Object(n["b"])((function(){return c.getters.user})),l=!0,u=!1,d={WKSC:!0,WQSC:!0},g={BKSC:!0,BQSC:!0},j={isAvailable:!1,passingPawn:[],captureSquare:[]},m=!1,O=Object(n["z"])(-1),f=Object(n["z"])(-1),v=!1,h=Object(n["z"])(!1);Object(n["u"])((function(){var t,a;null!==(t=e.gameData)&&void 0!==t&&t._id&&(b.startTimer(e.gameData._id,60*e.gameData.timeMode.split("|")[0],null!==(a=parseInt(e.gameData.timeMode.split("|")[1]))&&void 0!==a?a:0,r,e.gameData.mode,e.gameData.white.username,e.gameData.black.username,e.gameData.white.eloAtTheTime,e.gameData.black.eloAtTheTime),b.getGameData(e.gameData._id))})),Object(n["H"])((function(){return e.gameData}),(function(){var t;b.startTimer(e.gameData._id,60*e.gameData.timeMode.split("|")[0],null!==(t=parseInt(e.gameData.timeMode.split("|")[1]))&&void 0!==t?t:0,r,e.gameData.mode,e.gameData.white.username,e.gameData.black.username,e.gameData.white.eloAtTheTime,e.gameData.black.eloAtTheTime),b.getGameData(e.gameData._id)})),o.on("sendData",(function(e){l=e.isWhiteTurn,d=e.whiteCastling,g=e.blackCastling,j=e.enPassant,m=e.isCheck,r=e.board,h.value=!0,A()})),o.on("sendTime",(function(e){O.value=e.whiteTime,f.value=e.blackTime}));var w=Object(n["b"])((function(){var t,a,n,c;return null!=(null===(t=i.value)||void 0===t?void 0:t.username)&&(null===(a=i.value)||void 0===a?void 0:a.username)===(null===(n=e.gameData)||void 0===n||null===(c=n.black)||void 0===c?void 0:c.username)}));o.on("madeMove",(function(e){l=e.isWhiteTurn,d=e.whiteCastling,g=e.blackCastling,j=e.enPassant,m=e.isCheck,a("setMoves",e.moves),u?u=!1:(r=e.board,A())})),Object(n["v"])((function(){o.off("madeMove"),o.off("sendTime"),o.off("sendData")}));var _,y,D,A=function(){var e,t=Array.from(document.querySelectorAll(".piece")),a=[];(e=a).push.apply(e,Object(Ra["a"])(Array.from(document.querySelectorAll(".element-pool"))));for(var n=0;n<r.length;n++)for(var c=0;c<r[n].length;c++)""===r[n][c]&&function(){var e="square-".concat(8-c).concat(n+1),o=t.find((function(t){return Array.from(t.classList).includes(e)}));o&&a.push(o)}();for(var o=0;o<r.length;o++)for(var s=0;s<r[o].length;s++)if(""!==r[o][s]){var i=function(){var e="square-".concat(8-s).concat(o+1),n=r[o][s]===r[o][s].toLowerCase()?"b"+r[o][s]:"w"+r[o][s].toLowerCase(),c=t.find((function(t){return Array.from(t.classList).includes(e)&&Array.from(t.classList).includes(n)}));if(c)return t=t.filter((function(e){return e!==c})),"continue";var i=t.find((function(t){return Array.from(t.classList).includes(e)}));i&&a.push(i);var l=a[0];if(l){a=a.filter((function(e){return e!==l}));var u=Object(Ra["a"])(l.classList).find((function(e){return e.includes("square")})),d=Object(Ra["a"])(l.classList).find((function(e){return e.includes("w")||e.includes("b")}));u&&l.classList.remove(u),d&&l.classList.remove(d),Array.from(l.classList).includes("piece")||(l.classList.add("piece"),l.classList.remove("element-pool")),l.classList.add(e),l.classList.add(n)}}();if("continue"===i)continue}for(var l=0;l<a.length;l++)a[l].className="element-pool"},S=function(e,t){var a=document.querySelector(".layout__board").getBoundingClientRect(),n=e.clientX-a.left,c=e.clientY-a.top,o=t.offsetWidth,r=t.offsetHeight,s=(n-o/2)/o*100;s>750&&(s=750),s<-50&&(s=-50);var i=(c-r/2)/r*100;return i>750&&(i=750),i<-50&&(i=-50),[s,i]},k=function(e,t){var a=S(e,t),n=a[0],c=a[1],o=Math.ceil((n+50)/100),r=9-Math.ceil((c+50.01)/100);return 0===o&&(o=1),0===r&&(r=1),w.value&&(o=9-o,r=9-r),[r,o]},M=function(e){var t=S(e,_);_.style.transform="translate(".concat(t[0].toString(),"%, ").concat(t[1].toString(),"%)")},C=function(e){M(e);var t=k(e,_),a=Array.from(document.querySelectorAll(".square")),n=a.find((function(e){return Array.from(e.classList).includes("outlined")}));n&&n.classList.remove("outlined");var c=8*(8-t[0])+t[1]-1;w.value&&(c=63-c),a[c].classList.add("outlined")},T=function(t){var a,n,c,o,s,u;if(e.gameStarted&&1===t.which&&!((null===i||void 0===i?void 0:i.value.username)===(null===(a=e.gameData)||void 0===a||null===(n=a.black)||void 0===n?void 0:n.username)&&l||(null===i||void 0===i?void 0:i.value.username)===(null===(c=e.gameData)||void 0===c||null===(o=c.white)||void 0===o?void 0:o.username)&&!l)){var d=k(t,t.target),b=r[d[0]-1][8-d[1]];if(""!==b&&b===((null===i||void 0===i?void 0:i.value.username)===(null===(s=e.gameData)||void 0===s||null===(u=s.white)||void 0===u?void 0:u.username)?b.toUpperCase():b.toLowerCase())){var p=Array.from(document.querySelectorAll(".square")),g=8*(8-d[0])+d[1]-1;w.value&&(g=63-g),p[g].classList.add("highlighted"),p[g].classList.add("outlined"),_=t.target,D=d,M(t);var j=r[D[0]-1][8-D[1]];y=L(j.toLowerCase(),j!==j.toLowerCase(),D[0]-1,8-D[1],!0);for(var m=0;m<y.length;m++){var O=63-(8*y[m][0]+y[m][1]);w.value&&(O=63-O),p[O].classList.add("legal")}_.classList.add("dragging"),document.addEventListener("mousemove",C)}}},L=function(e,t,a,n,c){var o=[];if("r"===e||"q"===e){for(var s=1;s<=a;s++)if(o.push([a-s,n]),""!==r[a-s][n]){q(a-s,n,t)&&c&&o.pop();break}for(var i=1;i<8-a;i++){o.push([a+i,n]);var l=r[a+i][n];if(""!==l){q(a+i,n,t)&&c&&o.pop();break}}for(var u=1;u<=n;u++)if(o.push([a,n-u]),""!==r[a][n-u]){q(a,n-u,t)&&c&&o.pop();break}for(var b=1;b<8-n;b++)if(o.push([a,n+b]),""!==r[a][n+b]){q(a,n+b,t)&&c&&o.pop();break}}if("b"===e||"q"===e){for(var p=1;p<=(a<n?a:n);p++)if(o.push([a-p,n-p]),""!==r[a-p][n-p]){q(a-p,n-p,t)&&c&&o.pop();break}for(var O=1;O<=(a<7-n?a:7-n);O++)if(o.push([a-O,n+O]),""!==r[a-O][n+O]){q(a-O,n+O,t)&&c&&o.pop();break}for(var f=1;f<=(7-a<n?7-a:n);f++)if(o.push([a+f,n-f]),""!==r[a+f][n-f]){q(a+f,n-f,t)&&c&&o.pop();break}for(var v=1;v<(8-a<8-n?8-a:8-n);v++)if(o.push([a+v,n+v]),""!==r[a+v][n+v]){q(a+v,n+v,t)&&c&&o.pop();break}}else"p"===e?t?(c&&""===r[a+1][n]&&(o.push([a+1,n]),1===a&&""===r[a+2][n]&&o.push([a+2,n])),n-1>=0&&a+1<8&&(!q(a+1,n-1,t)&&""!==r[a+1][n-1]||!c)&&o.push([a+1,n-1]),n+1<8&&a+1<8&&(!q(a+1,n+1,t)&&""!==r[a+1][n+1]||!c)&&o.push([a+1,n+1]),c&&j.isAvailable&&(j.captureSquare[0]!==a+1||j.passingPawn[1]!==n+1&&j.passingPawn[1]!==n-1||o.push(j.captureSquare))):(c&&""===r[a-1][n]&&(o.push([a-1,n]),6===a&&""===r[a-2][n]&&o.push([a-2,n])),n-1>=0&&a-1>=0&&(!q(a-1,n-1,t)&&""!==r[a-1][n-1]||!c)&&o.push([a-1,n-1]),n+1<8&&a-1>=0&&(!q(a-1,n+1,t)&&""!==r[a-1][n+1]||!c)&&o.push([a-1,n+1]),c&&j.isAvailable&&(j.captureSquare[0]!==a-1||j.passingPawn[1]!==n+1&&j.passingPawn[1]!==n-1||o.push(j.captureSquare))):"n"===e?(a-2>=0&&(!(n-1>=0)||q(a-2,n-1,t)&&c||o.push([a-2,n-1]),!(n+1<8)||q(a-2,n+1,t)&&c||o.push([a-2,n+1])),a+2<8&&(!(n-1>=0)||q(a+2,n-1,t)&&c||o.push([a+2,n-1]),!(n+1<8)||q(a+2,n+1,t)&&c||o.push([a+2,n+1])),n-2>=0&&(!(a-1>=0)||q(a-1,n-2,t)&&c||o.push([a-1,n-2]),!(a+1<8)||q(a+1,n-2,t)&&c||o.push([a+1,n-2])),n+2<8&&(!(a-1>=0)||q(a-1,n+2,t)&&c||o.push([a-1,n+2]),!(a+1<8)||q(a+1,n+2,t)&&c||o.push([a+1,n+2]))):"k"===e&&(a-1>=0&&(q(a-1,n,t)||G(a-1,n,t)||o.push([a-1,n]),n-1>=0&&!q(a-1,n-1,t)&&!G(a-1,n-1,t)&&o.push([a-1,n-1]),n+1<8&&!q(a-1,n+1,t)&&!G(a-1,n+1,t)&&o.push([a-1,n+1])),a+1<8&&(q(a+1,n,t)||G(a+1,n,t)||o.push([a+1,n]),n-1>=0&&!q(a+1,n-1,t)&&!G(a+1,n-1,t)&&o.push([a+1,n-1]),n+1<8&&!q(a+1,n+1,t)&&!G(a+1,n+1,t)&&o.push([a+1,n+1])),n-1>=0&&!q(a,n-1,t)&&!G(a,n-1,t)&&o.push([a,n-1]),n+1<8&&!q(a,n+1,t)&&!G(a,n+1,t)&&o.push([a,n+1]),m||(t?(!d.WKSC||""!==r[0][1]||""!==r[0][2]||G(0,1,t)||G(0,2,t)||o.push([0,1]),!d.WQSC||""!==r[0][4]||""!==r[0][5]||""!==r[0][6]||G(0,4,t)||G(0,5,t)||G(0,6,t)||o.push([0,5])):(!g.BKSC||""!==r[7][1]||""!==r[7][2]||G(7,1,t)||G(7,2,t)||o.push([7,1]),!g.BQSC||""!==r[7][4]||""!==r[7][5]||""!==r[7][6]||G(7,4,t)||G(7,5,t)||G(7,6,t)||o.push([7,5]))));if(c){var h=B(!t);if(m&&"k"!==e&&function(){for(var e=[],a=0;a<r.length;a++)for(var n=0;n<r[a].length;n++)r[a][n]===(t?"K":"k")&&(e=[a,n]);var c=P(e[0],e[1],t);1===c.length?function(){var e=0;while(e<o.length){var t=h.find((function(t){return null===t||void 0===t?void 0:t.find((function(a){return a.toString()===o[e].toString()&&(null===t||void 0===t?void 0:t.find((function(e){return e.toString()===c[0].toString()})))}))}));t?e++:o.splice(e,1)}}():c.length>1&&(o=[])}(),0!==h.length){var w=h.find((function(e){return e.find((function(e){return e.toString()===[a,n].toString()}))}));if(w){var _=w.filter((function(e){return""!==r[e[0]][e[1]]})).length;2===_&&function(){var e=0;while(e<o.length)w.find((function(t){return t.toString()===o[e].toString()}))?e++:o.splice(e,1)}()}}}return o},q=function(e,t,a){return r[e][t]===(a?r[e][t].toUpperCase():r[e][t].toLowerCase())&&""!==r[e][t]},G=function(e,t,a){return P(e,t,a).length>0},P=function(e,t,a){for(var n=[],c=[],o=0;o<r.length;o++)for(var s=0;s<r[o].length;s++)""!==r[o][s]&&"k"!==r[o][s].toLowerCase()&&(a&&r[o][s]===r[o][s].toLowerCase()||!a&&r[o][s]===r[o][s].toUpperCase())&&c.push([o,s]);for(var i=0,l=c;i<l.length;i++){var u,d=l[i],b=r[d[0]][d[1]],p=L(b.toLowerCase(),b!==b.toLowerCase(),d[0],d[1],!1),g=Object(xa["a"])(p);try{for(g.s();!(u=g.n()).done;){var j=u.value;e===j[0]&&t===j[1]&&n.push([d[0],d[1]])}}catch(m){g.e(m)}finally{g.f()}}return n},B=function(e){for(var t=[],a=[],n=[],c=0;c<r.length;c++)for(var o=0;o<r[c].length;o++)""!==r[c][o]&&r[c][o]===(e?r[c][o].toUpperCase():r[c][o].toLowerCase())?t.push({row:c,col:o,name:r[c][o].toLowerCase()}):r[c][o]===(e?"k":"K")&&(a=[c,o]);for(var s=0,i=t;s<i.length;s++){var l=i[s];if(U(l,a,e)){var u=z(l,a);n.push(u)}}return n},U=function(e,t,a){var n=e.row,c=e.col,o=t[0],r=t[1],s=1;if("b"===e.name||"q"===e.name)while(s<8){if(n+s===o&&c+s===r||n-s===o&&c+s===r||n+s===o&&c-s===r||n-s===o&&c-s===r)return!0;s++}if("r"===e.name||"q"===e.name){if(n+s===o&&c===r||n-s&&c===r||n===o&&c+s===r||n===o&&c-s===r)return!0;s++}else if(L(e.name,a,n,c,!1).find((function(e){return e.toString()===t.toString()})))return!0;return!1},z=function(e,t){var a=[],n=t[0],c=t[1],o=e.row,r=e.col;if("n"!==e.name)while(n!==o||c!==r)n<o?n++:n>o&&n--,c<r?c++:c>r&&c--,a.push([n,c]);else a.push([o,r]);return a};window.addEventListener("mouseup",(function(e){if(null!=_){var t=k(e,_);y.find((function(e){return e[0]===t[0]-1&&e[1]===8-t[1]}))||(t[0]=D[0],t[1]=D[1]);var a=Object(Ra["a"])(_.classList).find((function(e){return e.includes("square")}));_.classList.remove(a),r[D[0]-1][8-D[1]]="";var n=document.querySelectorAll(".piece"),c="square-".concat(t[1]).concat(t[0]),o=Array.from(n).find((function(e){return Array.from(e.classList).includes(c)}));o&&(o.className="element-pool"),_.classList.add(c);var i=Object(Ra["a"])(_.classList).find((function(e){return e.includes("w")||e.includes("b")}));r[t[0]-1][8-t[1]]="b"===i[0]?i[1]:i[1].toUpperCase();var u=Array.from(document.querySelectorAll(".square")),d=8*(8-D[0])+D[1]-1;w.value&&(d=63-d),u[d].classList.remove("highlighted");var b=u.find((function(e){return Array.from(e.classList).includes("outlined")}));b&&b.classList.remove("outlined");var p=u.filter((function(e){return Array.from(e.classList).includes("legal")}));p.forEach((function(e){e.classList.remove("legal")})),_.classList.remove("dragging"),_.style.transform="",document.removeEventListener("mousemove",C),_=null,y=[],"p"===r[t[0]-1][8-t[1]].toLowerCase()&&(l&&t[0]-1===7||!l&&t[0]-1===0)&&(v=!0,s.value=!0),v||t[0]===D[0]&&t[1]===D[1]||I(t)}}));var I=function(t){var n,c=r[t[0]-1][8-t[1]];j.isAvailable&&("p"===c.toLowerCase()&&t[0]-1===j.captureSquare[0]&&8-t[1]===j.captureSquare[1]&&(r[j.passingPawn[0]][j.passingPawn[1]]=""),j.isAvailable=!1,j.passingPawn=[],j.captureSquare=[]),"k"===c.toLowerCase()?c===c.toLowerCase()?(g.BKSC=!1,g.BQSC=!1,t[0]-1===7&&8-t[1]===1?(r[7][0]="",r[7][2]="r"):t[0]-1===7&&8-t[1]===5&&(r[7][7]="",r[7][4]="r")):c===c.toUpperCase()&&(d.WKSC=!1,d.WQSC=!1,t[0]-1===0&&8-t[1]===1?(r[0][0]="",r[0][2]="R"):t[0]-1===0&&8-t[1]===5&&(r[0][7]="",r[0][4]="R")):"r"===c.toLowerCase()?c===c.toLowerCase()?8-D[1]===0?g.BKSC=!1:8-D[1]===7&&(g.BQSC=!1):c===c.toUpperCase()&&(8-D[1]===0?d.WKSC=!1:8-D[1]===7&&(d.WQSC=!1)):"p"===c.toLowerCase()&&(c===c.toUpperCase()?D[0]-1===1&&t[0]-1===3&&(8-t[1]+1<8&&"p"===r[3][8-t[1]+1]||8-t[1]-1>=0&&"p"===r[3][8-t[1]-1])&&(j.isAvailable=!0,j.passingPawn=[t[0]-1,8-t[1]],j.captureSquare=[t[0]-2,8-t[1]]):c===c.toLowerCase()&&D[0]-1===6&&t[0]-1===4&&(8-t[1]+1<8&&"P"===r[4][8-t[1]+1]||8-t[1]-1>=0&&"P"===r[4][8-t[1]-1])&&(j.isAvailable=!0,j.passingPawn=[t[0]-1,8-t[1]],j.captureSquare=[t[0],8-t[1]])),d.WKSC&&t[0]-1===0&&8-t[1]===0&&(d.WKSC=!1),d.WQSC&&t[0]-1===0&&8-t[1]===7&&(d.WQSC=!1),g.BKSC&&t[0]-1===7&&8-t[1]===0&&(g.BKSC=!1),g.BQSC&&t[0]-1===7&&8-t[1]===7&&(g.BQSC=!1),A();for(var o=0;o<r.length;o++)for(var s=0;s<r[o].length;s++)r[o][s]===(l?"k":"K")&&G(o,s,!l)&&(m=!0,J(!l)&&a("endGame",l?1:0,l?0:1));!m&&J(!l)&&a("endGame",1,1),l=!l,b.madeMove(null===(n=e.gameData)||void 0===n?void 0:n._id,r,d,g,j,m),u=!0,D=[]},x=function(e){var t=r[0].findIndex((function(e){return"p"===e}));-1!==t?(r[0][t]=e,I([1,8-t]),s.value=!1,v=!1):(t=r[7].findIndex((function(e){return"P"===e})),-1!==t&&(r[7][t]=e.toUpperCase(),I([8,8-t]),s.value=!1,v=!1))},R=function(){s.value=!1,b.getGameData(e.gameData._id),v=!1,D=[]},J=function(e){for(var t,a=[],n=[],c=0;c<r.length;c++)for(var o=0;o<r[c].length;o++)""!==r[c][o]&&(e&&r[c][o]===r[c][o].toUpperCase()||!e&&r[c][o]===r[c][o].toLowerCase())&&n.push({name:r[c][o].toLowerCase(),row:c,col:o});for(var s=0,i=n;s<i.length;s++){var l=i[s];t=L(l.name,e,l.row,l.col,!0),0!==t.length&&a.push(t)}return 0===a.length};return{isModalVisible:s,startMoving:T,resetBoard:A,user:i,isFlipped:w,whiteTime:O,blackTime:f,gotData:h,choosePromotionPiece:x,closeModal:R}},components:{ModalPromotion:dn}};const pn=T()(bn,[["render",Ia]]);var gn=pn,jn=(a("d81d"),{class:"sidebar-section"}),mn={key:0,class:"sidebar__chat"},On={key:0,class:"chat__draw-offer"},fn=Object(n["g"])("h3",null,"Opponent has offered a draw. Accept?",-1),vn={key:1,class:"chat__messages"},hn={class:"chat__buttons"},wn=["disabled"],_n=["disabled"],yn={class:"chat__input-area"},Dn=["disabled"],An=["disabled"];function Sn(e,t,a,c,o,r){var s,i=Object(n["B"])("router-link"),l=Object(n["B"])("Play");return Object(n["w"])(),Object(n["f"])("div",jn,[a.gameStarted?(Object(n["w"])(),Object(n["f"])("div",mn,[c.isDrawOffered?(Object(n["w"])(),Object(n["f"])("div",On,[fn,Object(n["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.$emit("draw")})},"Yes"),Object(n["g"])("button",{onClick:t[1]||(t[1]=function(e){return c.isDrawOffered=!1})},"No")])):Object(n["e"])("",!0),null!==(s=a.savedChat)&&void 0!==s&&s.length?(Object(n["w"])(),Object(n["f"])("div",vn,[(Object(n["w"])(!0),Object(n["f"])(n["a"],null,Object(n["A"])(a.savedChat.map((function(e){return{content:e.content,username:e.username,time:c.convertTime(e.time)}})),(function(e){return Object(n["w"])(),Object(n["f"])("div",{key:e.time,class:"chat__message"},[Object(n["g"])("p",null,[Object(n["i"])(Object(n["D"])(e.time)+" ",1),Object(n["j"])(i,{to:"/profile/".concat(e.username)},{default:Object(n["I"])((function(){return[Object(n["i"])(Object(n["D"])(e.username),1)]})),_:2},1032,["to"]),Object(n["i"])(": "+Object(n["D"])(e.content),1)])])})),128))])):Object(n["e"])("",!0),Object(n["g"])("div",hn,[Object(n["g"])("button",{disabled:!a.joinedChat,class:"btn",onClick:t[2]||(t[2]=function(t){e.$emit("offerDraw"),c.didSendDrawOffer=!0})},"Offer draw",8,wn),Object(n["g"])("button",{disabled:!a.joinedChat,class:"btn",onClick:t[3]||(t[3]=function(t){return e.$emit("surrender")})},"Surrender",8,_n)]),Object(n["g"])("div",yn,[Object(n["J"])(Object(n["g"])("input",{disabled:!a.joinedChat,"onUpdate:modelValue":t[4]||(t[4]=function(e){return c.content=e}),class:"input-area__input",type:"text",onKeydown:t[5]||(t[5]=Object(n["K"])((function(){return c.sendMessage&&c.sendMessage.apply(c,arguments)}),["enter"]))},null,40,Dn),[[n["F"],c.content]]),Object(n["g"])("button",{disabled:!a.joinedChat,onClick:t[6]||(t[6]=function(){return c.sendMessage&&c.sendMessage.apply(c,arguments)}),class:"input-area__send btn"},"Send",8,An)])])):Object(n["e"])("",!0),a.gameStarted?Object(n["e"])("",!0):(Object(n["w"])(),Object(n["d"])(l,{key:1,onShowSearch:t[7]||(t[7]=function(t){return e.$emit("showSearch",t)})}))])}a("498a");var kn={props:{gameStarted:{required:!0,type:Boolean},savedChat:{required:!1,type:Array},joinedChat:{required:!0,type:Boolean}},setup:function(e){var t=b.getSocket(),a=Object(p["b"])(),c=Object(n["z"])(""),o=Object(n["z"])(!1),r=Object(n["b"])((function(){var e;return null===(e=a.getters.activeGame)||void 0===e?void 0:e._id})),s=Object(n["b"])((function(){return a.getters.user})),i=Object(n["z"])(!1);t.on("sendMessage",(function(e){a.commit("addToChat",{username:e.username,content:e.content,time:e.time})})),Object(n["H"])((function(){var t;return null===(t=e.savedChat)||void 0===t?void 0:t.length}),(function(){setTimeout(d,0)})),Object(n["u"])((function(){setTimeout(d,0)})),t.on("offerDraw",(function(){i.value?i.value=!1:(o.value=!0,setTimeout(d,0))}));var l=function(){""!==c.value.trim()&&(b.sendMessage(r.value,s.value.username,c.value),c.value="")},u=function(e){var t=new Date(e).getHours().toString();parseInt(t)<10&&(t="0"+t);var a=new Date(e).getMinutes().toString();return parseInt(a)<10&&(a="0"+a),"".concat(t,":").concat(a)},d=function(){var e=document.querySelector(".chat__messages");e&&e.scrollTo(0,e.scrollHeight)};return{gameId:r,user:s,content:c,sendMessage:l,convertTime:u,isDrawOffered:o,didSendDrawOffer:i}},components:{Play:ct}};const Mn=T()(kn,[["render",Sn]]);var Cn=Mn,Tn={class:"modal-backdrop"},Ln={class:"modal modal--endgame"},qn={key:0,class:"modal__data"},Gn={class:"data__result"},Pn={class:"data__mode"},Bn={class:"data__players"},Un={class:"players__player"},zn={class:"player__username"},In={class:"player__rating"},xn=Object(n["g"])("div",{class:"players__headers"},[Object(n["g"])("p",{class:"headers__username"},"Username"),Object(n["g"])("p",{class:"headers__score"},"Score"),Object(n["g"])("p",{class:"headers__rating"},"Rating")],-1),Rn={class:"players__player"},Jn={class:"player__username"},Nn={class:"player__rating"};function Hn(e,t,a,c,o,r){var s,i;return Object(n["w"])(),Object(n["f"])("div",Tn,[Object(n["g"])("div",Ln,[Object(n["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.$emit("closeModal")}),class:"modal__close"},"Ã—"),null!==(s=a.resultData)&&void 0!==s&&s.white&&null!==(i=a.resultData)&&void 0!==i&&i.black?(Object(n["w"])(),Object(n["f"])("div",qn,[Object(n["g"])("h1",Gn,Object(n["D"])(a.resultData.white.score===a.resultData.black.score?"Draw":1===a.resultData.white.score?"White Won":"Black Won"),1),Object(n["g"])("h2",Pn,Object(n["D"])(a.gameData.mode.charAt(0).toUpperCase()+a.gameData.mode.slice(1)),1),Object(n["g"])("div",Bn,[Object(n["g"])("div",Un,[Object(n["g"])("h2",zn,Object(n["D"])(a.gameData.white.username),1),Object(n["g"])("p",{class:Object(n["p"])(["player__score",1===a.resultData.white.score&&1===a.resultData.black.score?"":1===a.resultData.white.score?"score--green":"score--red"])},Object(n["D"])(a.resultData.white.score),3),Object(n["g"])("p",In,[Object(n["i"])(Object(n["D"])(a.resultData.white.newElo)+" ",1),Object(n["g"])("span",{class:Object(n["p"])(["rating__diff",a.resultData.white.newElo-a.gameData.white.eloAtTheTime<0?"diff--red":a.resultData.white.newElo-a.gameData.white.eloAtTheTime>0?"diff--green":""])},"("+Object(n["D"])(a.resultData.white.newElo-a.gameData.white.eloAtTheTime)+")",3)])]),xn,Object(n["g"])("div",Rn,[Object(n["g"])("h2",Jn,Object(n["D"])(a.gameData.black.username),1),Object(n["g"])("p",{class:Object(n["p"])(["player__score",1===a.resultData.white.score&&1===a.resultData.black.score?"":1!==a.resultData.white.score?"score--green":"score--red"])},Object(n["D"])(a.resultData.black.score),3),Object(n["g"])("p",Nn,[Object(n["i"])(Object(n["D"])(a.resultData.black.newElo)+" ",1),Object(n["g"])("span",{class:Object(n["p"])(["rating__diff",a.resultData.black.newElo-a.gameData.black.eloAtTheTime<0?"diff--red":a.resultData.black.newElo-a.gameData.black.eloAtTheTime>0?"diff--green":""])},"("+Object(n["D"])(a.resultData.black.newElo-a.gameData.black.eloAtTheTime)+")",3)])])])])):Object(n["e"])("",!0)])])}var Vn={props:{gameData:{required:!0,type:Object},resultData:{required:!0,type:Object}}};const En=T()(Vn,[["render",Hn]]);var Fn=En,Kn={props:{id:{required:!1,type:String}},setup:function(e){var t=b.getSocket(),a=Object(g["c"])(),c=Object(p["b"])(),o=Object(n["z"])(0),r=Object(n["z"])(!1),s=Object(n["z"])(!1),i=Object(n["y"])({white:{score:null,newElo:null},black:{score:null,newElo:null}}),l=Object(n["b"])((function(){return c.getters.activeGame})),d=Object(n["b"])((function(){return c.getters.user}));t.on("endGame",(function(e){t.off("sendMessage"),t.off("offerDraw"),i.white.score=e.white.score,i.black.score=e.black.score,i.white.newElo=e.white.newElo,i.black.newElo=e.black.newElo,s.value=!0}));var j=function(){e.id&&fetch("".concat(u.baseURL,"/games/").concat(e.id)).then((function(e){return e.json()})).then((function(e){500===e.statusCode?a.replace("/play"):setTimeout((function(){var t;null===(t=d.value)||void 0===t||!t._id||e.isFinished||e.black.username!==d.value.username&&e.white.username!==d.value.username?a.replace("/play"):(b.joinChat(l.value._id),r.value=!0)}),500)})).catch((function(){return a.replace("/play")}))};Object(n["H"])((function(){return e.id}),(function(){j()})),j(),Object(n["v"])((function(){t.off("sendMessage"),t.off("offerDraw"),r.value=!1})),Object(n["H"])((function(){return d.value}),(function(){var e;null!==(e=d.value)&&void 0!==e&&e._id&&fetch("".concat(u.baseURL,"/games?username=").concat(c.getters.user.username),{method:"GET",headers:{"Access-Control-Allow-Credentials":!0},credentials:"include"}).then((function(e){return e.json()})).then((function(e){var t=e.filter((function(e){return!1===e.isFinished}))[0];t&&(a.replace("/play/"+t._id),b.joinChat(l.value._id),r.value=!0)}))}));var m=function(){b.offerDraw(l.value._id)},O=function(e,t){b.endGame(l.value._id,l.value.mode,{username:l.value.white.username,score:e,oldElo:l.value.white.eloAtTheTime},{username:l.value.black.username,score:t,oldElo:l.value.black.eloAtTheTime},o.value)},f=function(){s.value=!0,a.push("/").then((function(){c.commit("unsetActiveGame")}))};return{gameData:l,isModalVisible:s,offerDraw:m,user:d,resultData:i,joinedChat:r,closeModalAndRedirect:f,endGame:O,moves:o}},components:{BoardSection:gn,Sidebar:Cn,ModalEndgame:Fn}};const Yn=T()(Kn,[["render",Ma]]);var Wn=Yn,Qn={class:"base-container"},Xn={class:"grid__item"};function Zn(e,t,a,c,o,r){var s=Object(n["B"])("Leaderboards");return Object(n["w"])(),Object(n["f"])("div",Qn,[Object(n["g"])("div",Xn,[Object(n["j"])(s,{detailed:!0,playersAmount:10})])])}var $n={components:{Leaderboards:Ut}};const ec=T()($n,[["render",Zn]]);var tc=ec,ac={class:"base-container"},nc={class:"grid__item"},cc={class:"leaderboard-layout"},oc={class:"mode-buttons"},rc={key:0,class:"page-buttons"},sc=["disabled"],ic=["disabled"],lc=Object(n["g"])("span",{class:"arrow left"},null,-1),uc=[lc],dc=["disabled","onClick"],bc=["disabled"],pc=Object(n["g"])("span",{class:"arrow right"},null,-1),gc=[pc],jc=["disabled"];function mc(e,t,a,c,o,r){var s=Object(n["B"])("Leaderboard");return Object(n["w"])(),Object(n["f"])("div",ac,[Object(n["g"])("div",nc,[Object(n["g"])("div",cc,[Object(n["g"])("div",oc,[Object(n["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.$router.push("/leaderboard/bullet/1")}),class:Object(n["p"])(["btn","bullet"===a.mode?"btn--chosen":""])},"Bullet",2),Object(n["g"])("button",{onClick:t[1]||(t[1]=function(t){return e.$router.push("/leaderboard/blitz/1")}),class:Object(n["p"])(["btn","blitz"===a.mode?"btn--chosen":""])},"Blitz",2),Object(n["g"])("button",{onClick:t[2]||(t[2]=function(t){return e.$router.push("/leaderboard/rapid/1")}),class:Object(n["p"])(["btn","rapid"===a.mode?"btn--chosen":""])},"Rapid",2)]),Object(n["j"])(s,{onChangeTotalPagesVal:c.changeTotalPagesValue,onLoading:t[3]||(t[3]=function(e){return c.isLoading=!0}),detailed:!0,playersAmount:20,page:a.page,mode:a.mode},null,8,["onChangeTotalPagesVal","page","mode"]),!c.isLoading&&parseInt(a.page)<=c.totalPages?(Object(n["w"])(),Object(n["f"])("div",rc,[Object(n["g"])("button",{onClick:t[4]||(t[4]=function(t){return e.$router.push("/leaderboard/".concat(a.mode,"/1"))}),disabled:1===parseInt(a.page)},"First",8,sc),Object(n["g"])("button",{onClick:t[5]||(t[5]=function(t){return e.$router.push("/leaderboard/".concat(a.mode,"/").concat(parseInt(a.page)-1))}),disabled:1===parseInt(a.page)},uc,8,ic),(Object(n["w"])(!0),Object(n["f"])(n["a"],null,Object(n["A"])(c.pagesArr,(function(t){return Object(n["w"])(),Object(n["f"])("button",{key:t,disabled:t===parseInt(a.page),onClick:function(n){return e.$router.push("/leaderboard/".concat(a.mode,"/").concat(t))},class:Object(n["p"])(["btn",t===parseInt(a.page)?"btn--chosen":""])},Object(n["D"])(t),11,dc)})),128)),Object(n["g"])("button",{onClick:t[6]||(t[6]=function(t){return e.$router.push("/leaderboard/".concat(a.mode,"/").concat(parseInt(a.page)+1))}),disabled:parseInt(a.page)===c.totalPages},gc,8,bc),Object(n["g"])("button",{onClick:t[7]||(t[7]=function(t){return e.$router.push("/leaderboard/".concat(a.mode,"/").concat(c.totalPages))}),disabled:parseInt(a.page)===c.totalPages},"Last",8,jc)])):Object(n["e"])("",!0)])])])}var Oc={props:{mode:{type:String,required:!0,validator:function(e){return["bullet","blitz","rapid"].includes(e)}},page:{type:[String,Number],required:!0}},setup:function(e){var t=Object(g["c"])(),a=Object(n["z"])(!0),c=Object(n["z"])(-1),o=Object(n["b"])((function(){var t=[];return c.value<=3?t=[1,2,3]:parseInt(e.page)<=c.value-2?t=[parseInt(e.page),parseInt(e.page)+1,parseInt(e.page)+2]:parseInt(e.page)===c.value-1?t=[parseInt(e.page)-1,parseInt(e.page),parseInt(e.page)+1]:parseInt(e.page)===c.value&&(t=[parseInt(e.page)-2,parseInt(e.page)-1,parseInt(e.page)]),t})),r=function(n){c.value=n,a.value=!1,parseInt(e.page)>c.value&&t.replace("/leaderboard/".concat(e.mode,"/").concat(c.value))};return{changeTotalPagesValue:r,totalPages:c,pagesArr:o,isLoading:a}},components:{Leaderboard:Gt}};const fc=T()(Oc,[["render",mc]]);var vc=fc,hc=[{path:"/",component:xt},{path:"/profile/:username",component:Aa,props:!0},{path:"/play",component:Wn},{path:"/play/:id",component:Wn,props:!0},{path:"/leaderboard",component:tc},{path:"/leaderboard/:mode/:page",component:vc,props:!0},{path:"/:notFound(.*)",redirect:"/"}],wc=Object(g["a"])({history:Object(g["b"])(),routes:hc}),_c=wc,yc={user:function(e){return e.user},activeGame:function(e){return e.activeGame}},Dc=a("1da1"),Ac=(a("96cf"),{getUser:function(e,t){return Object(Dc["a"])(regeneratorRuntime.mark((function a(){var n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat(u.baseURL,"/users/").concat(t));case 2:return n=a.sent,a.next=5,n.json();case 5:if(c=a.sent,c){a.next=8;break}return a.abrupt("return");case 8:e.commit("setUser",c);case 9:case"end":return a.stop()}}),a)})))()},getActiveGame:function(e,t){return Object(Dc["a"])(regeneratorRuntime.mark((function a(){var n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat(u.baseURL,"/games/").concat(t));case 2:return n=a.sent,a.next=5,n.json();case 5:if(c=a.sent,c&&500!==c.statusCode){a.next=8;break}return a.abrupt("return",!1);case 8:return e.commit("setActiveGame",c),a.abrupt("return",!0);case 10:case"end":return a.stop()}}),a)})))()}}),Sc={setUser:function(e,t){e.user=t},unsetData:function(e){e.user=null,e.activeGame=null},setActiveGame:function(e,t){e.activeGame=t},unsetActiveGame:function(e){e.activeGame=null},addToChat:function(e,t){e.activeGame.chat.push(t)}},kc={namespaced:!1,state:function(){return{user:{},activeGame:{}}},getters:yc,actions:Ac,mutations:Sc},Mc=Object(p["a"])({modules:{userModule:kc}});a("756d");Object(n["c"])(Oe).use(_c).use(Mc).mount("#app")},cde0:function(e,t){e.exports="data:image/png;base64,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"},ce32:function(e,t,a){e.exports=a.p+"img/load.70392d3b.gif"},ec76:function(e,t,a){e.exports=a.p+"img/wRook.3c11ab7a.png"}});
//# sourceMappingURL=app.7ba6bd9f.js.map